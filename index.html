<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Дело о пропавших призах</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0d001a, #8e2de2);
            font-family: 'Poppins', sans-serif;
            color: #fff;
            overflow: hidden;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
        }

        /* Фоновые частицы */
        .background-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: -1;
        }
        .bg-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: radial-gradient(circle, #ff00ff, transparent);
            border-radius: 50%;
            animation: float 6s infinite ease-in-out;
        }
        @keyframes float {
            0% { transform: translateY(0) scale(1); opacity: 0.7; }
            50% { transform: translateY(-120vh) scale(1.3); opacity: 0.3; }
            100% { transform: translateY(-240vh) scale(0.5); opacity: 0; }
        }

        /* Эффектные частицы */
        .effect-particles {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 10;
        }
        .spark {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #00ffff;
            border-radius: 50%;
            animation: sparkBurst 1.5s ease-out forwards;
        }
        @keyframes sparkBurst {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(0) translate(var(--dx), var(--dy)); opacity: 0; }
        }
        .smoke-particle {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, rgba(255, 0, 255, 0.3), transparent);
            border-radius: 50%;
            animation: smokeRise 2s ease-out forwards;
        }
        @keyframes smokeRise {
            0% { transform: scale(0.5); opacity: 0.5; }
            100% { transform: scale(2) translateY(-100px); opacity: 0; }
        }
        .explosion {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff00ff;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(3) translate(var(--dx), var(--dy)); opacity: 0; }
        }

        /* Верхняя панель */
        #prizeBar {
            padding: 20px;
            background: rgba(0, 0, 0, 0.9);
            text-align: center;
            border-bottom: 5px solid #00ffff;
            box-shadow: 0 0 30px #ff00ff, inset 0 0 20px #00ffff;
            position: relative;
            overflow: hidden;
        }
        #prizeText {
            font-size: 40px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 15px #ff00ff, 0 0 30px #00ffff;
        }
        .prize-word {
            display: inline-block;
            opacity: 0;
            margin: 0 5px;
        }
        .reveal {
            opacity: 1;
            animation: neonPulse 1.5s infinite alternate, explodeIn 1s ease-in-out;
        }
        @keyframes neonPulse {
            from { text-shadow: 0 0 5px #fff, 0 0 15px #ff00ff, 0 0 25px #00ffff; }
            to { text-shadow: 0 0 15px #fff, 0 0 30px #ff00ff, 0 0 50px #00ffff; }
        }
        @keyframes explodeIn {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.5) rotate(10deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        /* Контент */
        .section {
            display: none;
            margin: 20px auto;
            width: 85%;
            max-width: 900px;
            background: rgba(0, 0, 0, 0.9);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 0 40px rgba(255, 0, 255, 0.7), inset 0 0 20px #00ffff;
            position: relative;
        }
        .active {
            display: block;
            animation: sectionFadeIn 1s ease-in-out;
        }
        @keyframes sectionFadeIn {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        h2 {
            font-size: 32px;
            color: #00ffff;
            text-shadow: 0 0 15px #00ffff;
            animation: glowText 2s infinite alternate;
        }
        @keyframes glowText {
            from { text-shadow: 0 0 5px #00ffff; }
            to { text-shadow: 0 0 20px #00ffff; }
        }
        input, button {
            padding: 15px 25px;
            margin: 15px;
            font-size: 20px;
            border: none;
            border-radius: 30px;
            background: linear-gradient(45deg, #ff00ff, #00ffff);
            color: #fff;
            box-shadow: 0 0 20px #ff00ff;
            transition: all 0.3s;
        }
        input {
            background: #1a1a1a;
            box-shadow: 0 0 10px #00ffff;
        }
        button:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 0 30px #00ffff, 0 0 50px #ff00ff;
        }
        .message {
            font-size: 24px;
            color: #fff;
            text-shadow: 0 0 10px #ff00ff;
        }

        /* Главные анимации */
        .magnifier {
            position: absolute;
            width: 150px;
            height: 150px;
            background: url('https://img.icons8.com/fluency/96/00ffff/search.png') no-repeat center;
            background-size: contain;
            animation: magnify 2.5s ease-in-out forwards;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 0 20px #00ffff);
        }
        @keyframes magnify {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 0; }
            30% { transform: translate(-50%, -50%) scale(2) rotate(360deg); opacity: 1; }
            70% { transform: translate(-50%, -50%) scale(1.5) rotate(720deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0) rotate(1080deg); opacity: 0; }
        }

        .lock {
            position: absolute;
            width: 120px;
            height: 120px;
            background: url('https://img.icons8.com/fluency/96/ff00ff/lock-2.png') no-repeat center;
            background-size: contain;
            animation: unlock 2.5s ease-in-out forwards;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            filter: drop-shadow(0 0 20px #ff00ff);
        }
        @keyframes unlock {
            0% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 1; }
            40% { transform: translate(-50%, -50%) scale(1.5) rotate(180deg); opacity: 1; }
            60% { transform: translate(-50%, -50%) scale(1.2) rotate(360deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(0) rotate(540deg); opacity: 0; }
        }

        .door {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            animation: openDoor 4s ease-in-out forwards;
            z-index: 999;
        }
        .door::before {
            content: '';
            position: absolute;
            width: 200px;
            height: 200px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: url('https://img.icons8.com/fluency/96/00ffff/door.png') no-repeat center;
            background-size: contain;
            filter: drop-shadow(0 0 30px #00ffff);
            animation: doorSpin 4s ease-in-out forwards;
        }
        @keyframes openDoor {
            0% { opacity: 1; }
            50% { opacity: 1; }
            100% { opacity: 0; }
        }
        @keyframes doorSpin {
            0% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            50% { transform: translate(-50%, -50%) scale(1.5) rotate(180deg); }
            100% { transform: translate(-50%, -150%) scale(2) rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Фоновые частицы -->
    <div class="background-particles" id="bgParticles"></div>
    <!-- Эффектные частицы -->
    <div class="effect-particles" id="effectParticles"></div>

    <!-- Верхняя панель -->
    <div id="prizeBar">
        <span id="prizeText">
            <span class="prize-word">Призы</span>
            <span class="prize-word">за</span>
            <span class="prize-word">дверью!</span>
        </span>
    </div>

    <!-- Часть 1: Улики поздравления -->
    <div id="part1" class="section active">
        <h2>Взломай послание</h2>
        <input type="text" id="greetingInput" placeholder="Без пробелов и запятой">
        <button onclick="checkGreeting()">Проверить</button>
        <div id="message1" class="message"></div>
    </div>

    <!-- Часть 2: Детективный замок -->
    <div id="part2" class="section">
        <h2>Открой замок</h2>
        <button onclick="checkKey('ВЕСНА')">ВЕСНА</button>
        <button onclick="checkKey('ЗИМА')">ЗИМА</button>
        <button onclick="checkKey('ЛЕТО')">ЛЕТО</button>
        <div id="message2" class="message"></div>
    </div>

    <!-- Часть 3: QR-квест -->
    <div id="part3" class="section">
        <h2>Раскрой код</h2>
        <input type="text" id="passwordInput" placeholder="Пароль из QR">
        <button onclick="checkPassword()">Взломать</button>
        <div id="message3" class="message"></div>
    </div>

    <script>
        const bgParticleContainer = document.getElementById("bgParticles");
        const effectParticleContainer = document.getElementById("effectParticles");
        const prizeWords = document.querySelectorAll(".prize-word");

        // Фоновые частицы
        for (let i = 0; i < 40; i++) {
            const particle = document.createElement("div");
            particle.className = "bg-particle";
            particle.style.left = `${Math.random() * 100}%`;
            particle.style.animationDelay = `${Math.random() * 6}s`;
            bgParticleContainer.appendChild(particle);
        }

        // Функция создания эффектных частиц
        function createParticles(type, count, x, y) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement("div");
                particle.className = type;
                const dx = (Math.random() - 0.5) * 200;
                const dy = (Math.random() - 0.5) * 200;
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.setProperty("--dx", `${dx}px`);
                particle.style.setProperty("--dy", `${dy}px`);
                particle.style.animationDelay = `${Math.random() * 0.5}s`;
                effectParticleContainer.appendChild(particle);
                setTimeout(() => particle.remove(), 2000);
            }
        }

        // Часть 1: Проверка поздравления
        function checkGreeting() {
            const input = document.getElementById("greetingInput").value.toUpperCase();
            const correctAnswer = "СПРАЗДНИКОМДЕТЕКТИВЫ";
            const messageDiv = document.getElementById("message1");

            if (input === correctAnswer) {
                messageDiv.innerHTML = `<span class="animate__animated animate__fadeIn">Найдено!</span>`;
                const magnifier = document.createElement("div");
                magnifier.className = "magnifier";
                document.body.appendChild(magnifier);
                createParticles("spark", 20, window.innerWidth / 2, window.innerHeight / 2);
                createParticles("smoke-particle", 10, window.innerWidth / 2, window.innerHeight / 2);
                setTimeout(() => {
                    magnifier.remove();
                    prizeWords[0].classList.add("reveal");
                    document.getElementById("part1").classList.remove("active");
                    document.getElementById("part2").classList.add("active");
                }, 2500);
            } else {
                messageDiv.innerHTML = `<span class="animate__animated animate__shakeX">Ошибка!</span>`;
            }
        }

        // Часть 2: Проверка ключа
        function checkKey(key) {
            const messageDiv = document.getElementById("message2");
            if (key === "ВЕСНА") {
                messageDiv.innerHTML = `<span class="animate__animated animate__fadeIn">Открыто!</span>`;
                const lock = document.createElement("div");
                lock.className = "lock";
                document.body.appendChild(lock);
                createParticles("explosion", 15, window.innerWidth / 2, window.innerHeight / 2);
                createParticles("smoke-particle", 10, window.innerWidth / 2, window.innerHeight / 2);
                setTimeout(() => {
                    lock.remove();
                    prizeWords[1].classList.add("reveal");
                    document.getElementById("part2").classList.remove("active");
                    document.getElementById("part3").classList.add("active");
                }, 2500);
            } else {
                messageDiv.innerHTML = `<span class="animate__animated animate__shakeX">Не тот ключ!</span>`;
            }
        }

        // Часть 3: Проверка пароля
        function checkPassword() {
            const input = document.getElementById("passwordInput").value.toUpperCase();
            const correctAnswer = "МАРТ";
            const messageDiv = document.getElementById("message3");

            if (input === correctAnswer) {
                messageDiv.innerHTML = `<span class="animate__animated animate__fadeIn">Раскрыто!</span>`;
                const door = document.createElement("div");
                door.className = "door";
                document.body.appendChild(door);
                createParticles("spark", 30, window.innerWidth / 2, window.innerHeight / 2);
                createParticles("explosion", 20, window.innerWidth / 2, window.innerHeight / 2);
                setTimeout(() => {
                    prizeWords[2].classList.add("reveal");
                    setTimeout(() => door.remove(), 1500);
                }, 2500);
            } else {
                messageDiv.innerHTML = `<span class="animate__animated animate__shakeX">Код неверный!</span>`;
            }
        }
    </script>
</body>
</html>